<!DOCTYPE html>

<html>
<head>
  <title>jquery.collapser.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="jquery.collapser.html">
                jquery.collapser.js
              </a>
            
              
              <a class="source" href="jquery.collapser.min.html">
                jquery.collapser.min.js
              </a>
            
              
              <a class="source" href="assignment.html">
                assignment.js
              </a>
            
              
              <a class="source" href="course.html">
                course.js
              </a>
            
              
              <a class="source" href="goal.html">
                goal.js
              </a>
            
              
              <a class="source" href="resource.html">
                resource.js
              </a>
            
              
              <a class="source" href="timeline.html">
                timeline.js
              </a>
            
              
              <a class="source" href="week.html">
                week.js
              </a>
            
              
              <a class="source" href="app-router.html">
                app-router.js
              </a>
            
              
              <a class="source" href="assignment.html">
                assignment.js
              </a>
            
              
              <a class="source" href="dropdown-item.html">
                dropdown-item.js
              </a>
            
              
              <a class="source" href="goal.html">
                goal.js
              </a>
            
              
              <a class="source" href="resource.html">
                resource.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>jquery.collapser.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* 
 * jQuery - Collapser - Plugin v2.0
 * http://www.aakashweb.com/
 * Copyright 2014, Aakash Chakravarthy
 * Released under the MIT License.
 */</span>

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( $, window, document, undefined )</span> </span>{
	
    <span class="hljs-keyword">var</span> name = <span class="hljs-string">"collapser"</span>,
        defaults = {
			target: <span class="hljs-string">'next'</span>,
			mode: <span class="hljs-string">'words'</span>,
			speed: <span class="hljs-string">'slow'</span>,
			truncate: <span class="hljs-number">10</span>,
			ellipsis: <span class="hljs-string">'...'</span>,
			effect: <span class="hljs-string">'fade'</span>,
			controlBtn: <span class="hljs-string">''</span>,
			showText: <span class="hljs-string">'Show more'</span>,
			hideText: <span class="hljs-string">'Hide text'</span>,
			showClass: <span class="hljs-string">'show-class'</span>,
			hideClass: <span class="hljs-string">'hide-class'</span>,
			atStart: <span class="hljs-string">'hide'</span>,
			lockHide: <span class="hljs-literal">false</span>,
			dynamic: <span class="hljs-literal">false</span>,
			changeText: <span class="hljs-literal">false</span>,
			beforeShow: <span class="hljs-literal">null</span>,
			afterShow: <span class="hljs-literal">null</span>,
			beforeHide: <span class="hljs-literal">null</span>,
			afterHide: <span class="hljs-literal">null</span>
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Collapser</span><span class="hljs-params">( el, options )</span> </span>{
		
		<span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>;
		
        s.o = $.extend( {}, defaults, options );
		s.e = $(el);
		s.init();

    }
	
	Collapser.prototype = {
		init: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
		
			<span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Shorthand variables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			s.mode = s.o.mode;
			s.remaining = {};
			s.ctrlHtml = <span class="hljs-string">' &lt;a href="#" data-ctrl class="'</span> + ( !$.isFunction(s.o.controlBtn) ? s.o.controlBtn : <span class="hljs-string">''</span> ) + <span class="hljs-string">'"&gt;&lt;/a&gt;'</span>;
	
			$( s.e ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Store the original HTML in a data cache</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$(<span class="hljs-keyword">this</span>).data( <span class="hljs-string">'oCnt'</span>, s.e.html() );</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Get the start type of the target element and activate the collapse</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> atStart = $.isFunction( s.o.atStart ) ? s.o.atStart.call( s.e ) : s.o.atStart;
				
				atStart = ( <span class="hljs-keyword">typeof</span> s.e.attr( <span class="hljs-string">'data-start'</span> ) !== <span class="hljs-string">'undefined'</span> ) ? s.e.attr( <span class="hljs-string">'data-start'</span> ) : atStart;
				
				<span class="hljs-keyword">if</span>( atStart == <span class="hljs-string">'hide'</span> ){
					s.hide( s.e, <span class="hljs-number">0</span> );
				}<span class="hljs-keyword">else</span>{
					s.show( s.e, <span class="hljs-number">0</span> );
				}
				
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Update the hidden lines on window resize</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> rTimer;
			$( <span class="hljs-built_in">window</span> ).on( <span class="hljs-string">'resize'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
				<span class="hljs-keyword">if</span>( s.o.dynamic &amp;&amp; s.mode == <span class="hljs-string">'lines'</span> ){
					clearTimeout( rTimer );
					rTimer = setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{ 
						s.reInit( s.e );
					}, <span class="hljs-number">100</span>);
				}
			});

		},</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>SHOW METHOD</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		show: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( ele, speed )</span></span>{
			<span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>,
				e = $( ele );
				
			<span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> speed === <span class="hljs-string">'undefined'</span> ) speed = s.o.speed;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
				<span class="hljs-keyword">if</span>( $.isFunction( s.o.afterShow ) )
					s.o.afterShow.call( s.e, s );
			};
			
			<span class="hljs-keyword">if</span>( $.isFunction( s.o.beforeShow ) )
				s.o.beforeShow.call( s.e, s );
			
			<span class="hljs-keyword">switch</span>( s.mode ){
				<span class="hljs-keyword">case</span> <span class="hljs-string">'chars'</span>:
				<span class="hljs-keyword">case</span> <span class="hljs-string">'words'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Get the current height of the element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">var</span> oHeight = e.height();</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Replace the HTML with the original one and get the new height</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					e.html( e.data(<span class="hljs-string">'tHTML'</span>) );
					<span class="hljs-keyword">var</span> nHeight	= e.height();</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Animate the element height from old to new and update element classes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					e.height( oHeight );
					e.animate({
						<span class="hljs-string">'height'</span>: nHeight
					}, speed, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
						e.height( <span class="hljs-string">'auto'</span> );
						callback();
					}).removeClass( s.o.hideClass ).addClass( s.o.showClass );</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Update the temporary HTML in the data cache</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					e.data( <span class="hljs-string">'tHTML'</span>, e.html() );
					
				<span class="hljs-keyword">break</span>;
				
				<span class="hljs-keyword">case</span> <span class="hljs-string">'lines'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Wrap the inner elements with a div tag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( e.children(<span class="hljs-string">'div'</span>).length == <span class="hljs-number">0</span> )
						e.wrapInner( <span class="hljs-string">'&lt;div&gt;'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Get current height and height after replacing content</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">var</span> eWrap = e.children( <span class="hljs-string">'div'</span> ),
						tHeight = eWrap.height(),
						getHeight = eWrap.html( e.data(<span class="hljs-string">'oCnt'</span>) ).css( <span class="hljs-string">'height'</span>, <span class="hljs-string">''</span> ).height(),
						setHeight = eWrap.css( <span class="hljs-string">'height'</span>, tHeight );</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Animate the element height from old to new and update the classes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					eWrap.animate({
						height: getHeight
					}, speed, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
						eWrap.height( <span class="hljs-string">'auto'</span> );
						callback();
					});
					
					e.removeClass( s.o.hideClass ).addClass( s.o.showClass )
				
				<span class="hljs-keyword">break</span>;
				
				<span class="hljs-keyword">case</span> <span class="hljs-string">'block'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Call the special function this mode</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					s.blockMode( e, <span class="hljs-string">'show'</span>, speed, callback );
				
				<span class="hljs-keyword">break</span>;
				
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Update the status variable to ON</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			s.status = <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Check whether to hide the control button after expand</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>( s.o.lockHide == <span class="hljs-literal">true</span> ){
				e.find( <span class="hljs-string">'[data-ctrl]'</span> ).remove();
				<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Update the on click event of the control button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>( s.mode == <span class="hljs-string">'block'</span> ){</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>For block mode</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				e.off(<span class="hljs-string">'click.coll'</span>).on( <span class="hljs-string">'click.coll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span></span>{
					event.preventDefault();
					s.hide( e );
				});
				
			}<span class="hljs-keyword">else</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>If there is no control button, add it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>( e.find( <span class="hljs-string">'[data-ctrl]'</span> ).length == <span class="hljs-number">0</span> &amp;&amp; !$.isFunction( s.o.controlBtn ) ){
					e.append( s.ctrlHtml );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Bind the on click event of the control button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				s.ctrlBtn = $.isFunction( s.o.controlBtn ) ? s.o.controlBtn.call( s.e ) : $( e.find( <span class="hljs-string">'[data-ctrl]'</span> ) );
				
				s.ctrlBtn.off( <span class="hljs-string">'click.coll'</span> ).on( <span class="hljs-string">'click.coll'</span> , <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span></span>{
					event.preventDefault();
					s.hide( e );
				}).html( s.o.hideText );
			
			}
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>HIDE METHOD</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		hide: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( ele, speed )</span></span>{
			
			<span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>,
				e = $( ele );
				
			<span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> speed === <span class="hljs-string">'undefined'</span> ) speed = s.o.speed;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
				<span class="hljs-keyword">if</span>( $.isFunction( s.o.afterHide ) )
					s.o.afterHide.call( s.e, s );
			};
			
			<span class="hljs-keyword">if</span>( $.isFunction( s.o.beforeHide ) )
				s.o.beforeHide.call( s.e, s );</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Remove the control button already present</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			e.find(<span class="hljs-string">'[data-ctrl]'</span>).remove();
			
			<span class="hljs-keyword">switch</span>( s.mode ){
				<span class="hljs-keyword">case</span> <span class="hljs-string">'chars'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Get the text of the element and calculate the remaining chars</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">var</span> txt = $.trim(e.text());
					s.remaining[<span class="hljs-string">'chars'</span>] = txt.length - s.o.truncate;</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Slice the text, hide the remaining text, add control button &amp; update class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( txt.length &gt; s.o.truncate ){
						e.data( <span class="hljs-string">'tHTML'</span>, e.html() );
						txt = s.pad( txt.slice(<span class="hljs-number">0</span>, s.o.truncate), txt.slice( s.o.truncate, txt.length) );
						e.html( txt ).removeClass( s.o.showClass ).addClass( s.o.hideClass );
						callback();
					}
					
				<span class="hljs-keyword">break</span>;
				
				<span class="hljs-keyword">case</span> <span class="hljs-string">'words'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Get the no of words and calculate the remaining words</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">var</span> txt = $.trim(e.text()),
						stxt = txt.split( <span class="hljs-string">" "</span> );

					s.remaining[<span class="hljs-string">'words'</span>] = stxt.length - s.o.truncate;</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Slice the text, hide the remaining text, add control button &amp; update class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( stxt.length &gt; s.o.truncate ){
						e.data( <span class="hljs-string">'tHTML'</span>, e.html() );
						txt = s.pad( stxt.slice( <span class="hljs-number">0</span>, s.o.truncate ).join( <span class="hljs-string">" "</span> ), stxt.slice( s.o.truncate, stxt.length ).join( <span class="hljs-string">" "</span> ) );
						e.html( txt ).removeClass( s.o.showClass ).addClass( s.o.hideClass );
						callback();
					}
				
				<span class="hljs-keyword">break</span>;
				
				<span class="hljs-keyword">case</span> <span class="hljs-string">'lines'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Wrap inner element with a div</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( e.children(<span class="hljs-string">'div'</span>).length == <span class="hljs-number">0</span> )
						e.wrapInner( <span class="hljs-string">'&lt;div&gt;'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Calculate current height and new height</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">var</span> eWrap = e.children( <span class="hljs-string">'div'</span> ).css( <span class="hljs-string">'height'</span>, <span class="hljs-string">''</span> );
					eWrap.html( eWrap.text() );
					<span class="hljs-keyword">var</span> height = eWrap.height();</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Calculate line height from a new element and store in data cache</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> e.data( <span class="hljs-string">'lHeight'</span> ) === <span class="hljs-string">'undefined'</span> ){
						temp = eWrap.clone();
						lHeight = temp.text( <span class="hljs-string">'a'</span> ).insertAfter( eWrap ).height();
						e.data( <span class="hljs-string">'lHeight'</span>, lHeight );
						eWrap.next().remove();
					}<span class="hljs-keyword">else</span>{
						lHeight = e.data( <span class="hljs-string">'lHeight'</span> );
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Calculate no of lines</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					lines = height/lHeight;
					s.remaining[<span class="hljs-string">'lines'</span>] = lines - s.o.truncate;</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Hide remaining lines and update class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( s.remaining[<span class="hljs-string">'lines'</span>] &gt; <span class="hljs-number">0</span> ){
						
						eWrap.css( <span class="hljs-string">'overflow'</span>, <span class="hljs-string">'hidden'</span> );
						
						eWrap.animate({ 
							height : lHeight * s.o.truncate 
						}, speed ).data( <span class="hljs-string">'tHeight'</span>, height );
						
						e.removeClass( s.o.showClass ).addClass( s.o.hideClass );
						
						<span class="hljs-keyword">if</span>( e.find( <span class="hljs-string">'[data-ctrl]'</span> ).length == <span class="hljs-number">0</span> &amp;&amp; !$.isFunction( s.o.controlBtn ) ){
							e.append( s.ctrlHtml );
						}
						
						callback();
						
					}
					
				<span class="hljs-keyword">break</span>;
				
				<span class="hljs-keyword">case</span> <span class="hljs-string">'block'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Special function for block mode</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					s.blockMode( e, <span class="hljs-string">'hide'</span>, speed, callback );
				
				<span class="hljs-keyword">break</span>;
				
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Update the status variable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			s.status = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Update the events of the control button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>( s.mode == <span class="hljs-string">'block'</span> ){
			
				e.unbind( <span class="hljs-string">'click.coll'</span> ).bind( <span class="hljs-string">'click.coll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span></span>{
					event.preventDefault();
					s.show( e );
				});
			
			}<span class="hljs-keyword">else</span>{
			
				s.ctrlBtn = $.isFunction( s.o.controlBtn ) ? s.o.controlBtn.call( s.e ) : $( e.find( <span class="hljs-string">'[data-ctrl]'</span> ) );
				
				s.ctrlBtn.off(<span class="hljs-string">'click.coll'</span>).on(<span class="hljs-string">'click.coll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span></span>{
					event.preventDefault();
					s.show( e );
				}).html( s.o.showText );</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Replace the %s with the remaining chars/words/lines count</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> sText = s.o.showText;
				<span class="hljs-keyword">var</span> plural = {
					<span class="hljs-string">'chars'</span> : [ <span class="hljs-string">'character'</span>, <span class="hljs-string">'characters'</span> ],
					<span class="hljs-string">'words'</span> : [ <span class="hljs-string">'word'</span>, <span class="hljs-string">'words'</span> ],
					<span class="hljs-string">'lines'</span> : [ <span class="hljs-string">'lines'</span>, <span class="hljs-string">'lines'</span> ]
				};
				<span class="hljs-keyword">var</span> toReplace = s.remaining[s.mode] + ( s.remaining[s.mode] == <span class="hljs-number">1</span> ? <span class="hljs-string">' '</span> + plural[s.mode][<span class="hljs-number">0</span>] : <span class="hljs-string">' '</span> + plural[s.mode][<span class="hljs-number">1</span>] );
				
				sText = sText.replace(<span class="hljs-string">'%s'</span>, toReplace);
				
				s.ctrlBtn.html( sText );
				
			}
			
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Method used by chars and word modes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		pad: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( a, b )</span></span>{
			<span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>;
			<span class="hljs-keyword">return</span> a + <span class="hljs-string">'&lt;span class="coll-ellipsis"&gt;'</span> + s.o.ellipsis + <span class="hljs-string">'&lt;/span&gt;'</span> + ( !$.isFunction( s.o.ctrlBtn ) ? s.ctrlHtml : <span class="hljs-string">''</span> ) + <span class="hljs-string">'&lt;span class="coll-hidden" style="display:none"&gt;'</span> + b + <span class="hljs-string">'&lt;/span&gt;'</span>;
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Method for block mode</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		blockMode: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e, type, speed, cb )</span></span>{
			
			<span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>,
				effects = [ <span class="hljs-string">'fadeOut'</span>, <span class="hljs-string">'slideUp'</span>, <span class="hljs-string">'fadeIn'</span>, <span class="hljs-string">'slideDown'</span> ],
				inc = ( s.o.effect == <span class="hljs-string">'fade'</span> ) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>,
				effect = ( type == <span class="hljs-string">'hide'</span> ) ? effects[ inc ] : effects [ inc + <span class="hljs-number">2</span> ];
						
			<span class="hljs-keyword">if</span>( !$.isFunction( s.o.target ) ){
				<span class="hljs-keyword">if</span>( $.fn[ s.o.target ] )
					$( e )[ s.o.target ]()[ effect ]( speed, cb );
			}<span class="hljs-keyword">else</span>{
				s.o.target.call( s.e )[ effect ]( speed, cb );
			}
			
			<span class="hljs-keyword">if</span>( type == <span class="hljs-string">'show'</span> ){
				e.removeClass( s.o.showClass ).addClass( s.o.hideClass );
				<span class="hljs-keyword">if</span>( s.o.changeText )
					e.text( s.o.hideText );
			}<span class="hljs-keyword">else</span>{
				e.removeClass( s.o.hideClass ).addClass( s.o.showClass );
				<span class="hljs-keyword">if</span>( s.o.changeText )
					e.text( s.o.showText );
			}
			
		},
		
		reInit: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span></span>{
			
			<span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Remove the control button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			e.find( <span class="hljs-string">'[data-ctrl]'</span> ).remove();</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Switch the content to the original one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>( s.mode == <span class="hljs-string">'chars'</span> || <span class="hljs-string">'words'</span> ){
				e.html( s.e.data( <span class="hljs-string">'oCnt'</span> ) );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Collapse as per previous status</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>( s.status == <span class="hljs-number">0</span> ) s.hide( e, <span class="hljs-number">0</span> );
			<span class="hljs-keyword">else</span> s.show( e, <span class="hljs-number">0</span> );
			
		}
		
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Attach the object to the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $.fn[name] = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( options )</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">if</span> (!$.data(<span class="hljs-keyword">this</span>, name)) {
                $.data(<span class="hljs-keyword">this</span>, name, <span class="hljs-keyword">new</span> Collapser( <span class="hljs-keyword">this</span>, options ));
            }
        });
    };

})( jQuery, <span class="hljs-built_in">window</span>, <span class="hljs-built_in">document</span> );</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
